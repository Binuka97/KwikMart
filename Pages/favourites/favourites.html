<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8" />
  <title>Favourites</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="favourites.css" />
  <link rel="stylesheet" href="../Navigation/navigation.css" />
  <link rel="stylesheet" href="../Navigation/bottomNav.css" />
  <link rel="stylesheet" href="../Footer/footer.css" />
  <script src="../../utils/utils.js"></script>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
  <!-- the three things that jQuery Mobile needs to work -->
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <script src="https://smtpjs.com/v3/smtp.js"></script>
  <script type="text/javascript" src="./favourites.js"></script>
  <script type="text/javascript" src="../../utils/products.json"></script>

</head>

<div data-role="header" data-position="fixed">
  <nav class="navbar-header">
    <span class="open-slide">
      <p href="#" class="hamburger-icon-qr" onclick="openSlideMenu()">
        <i class="fa fa-bars"></i>
      </p>
    </span>
    <ul>
      <img src="../../assets/images/logo1.png" class="logo-header" alt="logocolored" />
    </ul>
  </nav>
  <div id="side-menu" class="side-nav">
    <div class="btn-close" onclick="closeSlideMenu()">&times;</div>
    <div href="#" class="menu-icon">
      <i class="fas fa-home icons"></i>Home
    </div>
    <div href="#" class="menu-icon">
      <i class="fas fa-th-list icons"></i>Categories
    </div>
    <div href="#" class="menu-icon">
      <i class="fas fa-heart icons"></i>Favourites
    </div>
    <div href="#" class="menu-icon">
      <i class="fas fa-shopping-cart icons"></i>Cart
    </div>
    <div href="#" class="menu-icon">
      <i class="fa fa-percent icons"></i>Promotions
    </div>
    <div href="#" class="menu-icon">
      <i class="fas fa-gamepad icons"></i>Games
    </div>
    <div href="#" class="menu-icon">
      <i class="fa fa-address-card icons"></i>About Us
    </div>
    <div href="#" class="menu-icon">
      <i class="fa fa-qrcode icons"></i>Scan Me
    </div>
    <div href="#" class="menu-icon">
      <i class="fa fa-user icons"></i>Account
    </div>
    <div href="#" class="menu-icon">
      <i class="fa fa-power-off icons"></i>Sign out
    </div>
  </div>

</div>

<body>
  <div class="container col-12 col-xs-12 mb-5">
    <div class="topic mt-4">
      <span class="d-inline-block float-left">
        <a href="C:/xampp/htdocs/KwikMart/KwikMart/Pages/Categories/Home.html">
          <i class="fa fa-arrow-left qr-back-icon" aria-hidden="true"></i></a>
      </span>
      <span class="d-flex justify-content-center fav-title">My Favourites</span>
    </div>

    <div style="padding-top: 40px;">
      <label class="float-left select-all-checkbox">
        <input class="select-all" id="select-all" type="checkbox" data-role="none">
        <span class="checkmark"></span>
        <p id="checkbox-label"> Select All</p>
      </label>
      <img src="../../assets/icons/delete.png" class="float-right" />
      <div class="clear"></div>
    </div>

    <div class="products">
      <ul class="favourite-products" id="favourite-products">
      </ul>
    </div>

  </div>
  <a class="trigger_popup_fricc">
    <div class="share-favourites text-center"><span>Share Favourites</span>
  </a>

  <div class="hover_bkgr_fricc">
    <span class="helper"></span>
    <div style="text-align: left;">
      <span style="font-size: 18px; font-family: Poppins, sans-serif; font-weight: 600; color: #676767;">Share Your Favourites</span>
      <div style="color: #676767;" class="popupCloseButton">&times;</div>
      <br/><br/>
      <label style="font-family: Poppins, sans-serif; color: #676767;" for="fields">Email: </label>
      <input id="email" name="email" type="text" id="email" required>
      <br/>
      <label style="font-family: Poppins, sans-serif; color: #676767;" for="fields">Message:</label>
      <input id="message" name="message" type="text" value="" required>
      <button class="button" id="button2" onclick="sendEmail()">Share</button>
    </div>
  </div>
  </div>

  <script>
    function openSlideMenu() {
      document.getElementById("side-menu").style.width = "250px";
    }

    function closeSlideMenu() {
      document.getElementById("side-menu").style.width = "0px";
    }

    $(window).load(function () {
      $(".trigger_popup_fricc").click(function () {
        $('.hover_bkgr_fricc').show();
      });
      $('.popupCloseButton').click(function () {
        $('.hover_bkgr_fricc').hide();
      });
    });


    function sendEmail() {
      let email = $("#email").val();
      let favourites = JSON.parse(localStorage.getItem("favouriteItems"))
      if (favourites) {
        let favString = "";
        favourites.forEach((item) => {
          let fav = `<br/> ${item.name}`;
          favString += fav
        })

        Email.send({
          Host: "smtp.gmail.com",
          Username: "binuka.2017172@iit.ac.lk",
          Password: "Bikkabikka97",
          To: email,
          From: "binuka.2017172@iit.ac.lk",
          Subject: "Your Favourites List",
          Body: favString,
        }).then(
          message => alert("Successfully sent the favourites list")
        );

        $(".popupCloseButton").append(`
          <div style="color: #676767;" class="successMessage">
          <p style="color: #676767;">Successfully Shared Your Favourites via an email</p>
          <img src="../../assets/icons/thumb.png">
          <button class="button" id="button2" ">Done</button>
          </div>
          `)
        }
      }
  </script>


</body>
<footer>
  <div style="margin-top: 410px;" class="footer-top">
    <div class="container">
      <div class="row">
        <div class="col-md-3 col-sm-6 col-xs-12 segment-one">
          <img
            src="../../assets/images/logo-light.png"
            class="logo-footer"
            alt="light-logo"
          />
          <p class="content">
            Our pioneer venture into modern trade in 1983 was a unique
            innovation of our company's longstanding trading legacy. We
            continued to challenge the norm by revolutionizing what was
            traditionally an affluent affair by offering products of a higher
            value for the lowest prices.
          </p>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12 segment-two">
          <h2 class="topic-content">Links</h2>
          <ul>
            <p class="link" href="#">Home</p>
            <p class="link" href="#">Scan Me</p>
            <p class="link" href="#">Reviews</p>
            <p class="link" href="#">Categories</p>
            <p class="link" href="#">About us</p>
            <p class="link" href="#">Help</p>
          </ul>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12 segment-three">
          <h2 class="topic-content">Follow Us</h2>
          <p class="content">
            Questions or Feedbacks? We'd love to hear from you. Please follow
            us on our social media profiles in order to keep updated
          </p>
          <div class="icons" href="#"><i class="fa fa-facebook"></i></div>
          <div class="icons" href="#"><i class="fa fa-twitter"></i></div>
          <div class="icons" href="#"><i class="fa fa-linkedin"></i></div>
          <div class="icons" href="#"><i class="fa fa-pinterest"></i></div>
        </div>
        <div class="col-md-3 col-sm-6 col-xs-12 segment-four">
          <h2 class="topic-content">Our Newsletters</h2>
          <p class="content">
            Questions or Feedbacks? We'd love to hear from you. Please follow
            us on our social media profiles in order to keep updated
          </p>
          <form action="" class="form-area">
            <span class="email-field"></span>
            <span class="submit-button">Subscribe</span>
          </form>
        </div>
      </div>
    </div>
  </div>
  <p class="footer-bottom-text">
    Copy right 2022 by KwikMart Grocery Store | All rights reserved
  </p>
</footer>
<div data-role="footer" data-position="fixed">
	<nav class="nav">
		<a href="#" class="nav__link">
			<img src="../../assets/icons/home.png" class="nav-icons-home" alt="home" />
		</a>
		<a href="#" class="nav__link nav__link--active" onclick="favPage()">
			<img src="../../assets/icons/favourite.png" class="nav-icons-fav" alt="favourite" />
		</a>
		<a href="#" class="nav__link" onclick="cartPage()">
			<img src="../../assets/icons/cart.png" class="nav-icons-cart" alt="cart" />
		</a>
		<a href="#" class="nav__link">
			<img src="../../assets/icons/user.png" class="nav-icons-user" alt="user" />
		</a>
	</nav>
</div>
<script src="https://rawgit.com/schmich/instascan-builds/master/instascan.min.js"></script>
<script type="text/javascript"></script>

</html>